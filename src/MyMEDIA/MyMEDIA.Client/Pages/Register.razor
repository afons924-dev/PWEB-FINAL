@page "/register"
@using MyMEDIA.Client.Auth
@inject CustomAuthStateProvider AuthStateProvider
@inject NavigationManager Navigation

<h3>Register</h3>

<div class="card" style="max-width: 400px;">
    <div class="card-body">
        <div class="mb-3">
            <label>Email</label>
            <input @bind="email" class="form-control" type="email" />
        </div>
        <div class="mb-3">
            <label>Password</label>
            <input @bind="password" class="form-control" type="password" />
        </div>
        <button class="btn btn-primary w-100" @onclick="HandleRegister">Register</button>
    </div>
</div>

@code {
    string email;
    string password;

    async Task HandleRegister()
    {
        try
        {
            await AuthStateProvider.Register(email, password);
            Navigation.NavigateTo("/login");
        }
        catch(Exception ex)
        {
            Console.WriteLine($"Register failed: {ex.Message}");
        }
    }
}
